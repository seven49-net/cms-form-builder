var formBuilder={helpers:{languageCode:function(e){e=void 0===e||null===e?"de":e;var r=location.pathname,t;return t="/"===r?e:r.substr(1,2)},badIE:function(){return"undefined"==typeof FormData?!0:!1},isEmpty:function(e){return"undefined"==typeof e||null===e},isReallyEmpty:function(e){return formBuilder.helpers.isEmpty(e)||0===e.length},renderMessage:function(e){var r=[];return r.push('<table class="form-data">'),e.find("input,select,textarea").not("[type=hidden]").each(function(){"file"===$(this).attr("type")?void 0!==$(this)[0].files[0]&&null!==$(this)[0].files[0]&&r.push("<tr><td>"+$(this).attr("id")+"</td><td>"+$(this)[0].files[0].name+"</td></tr>"):"radio"===$(this).attr("type")?r.push("<tr><td>"+$(this).attr("name")+" "+$(this).val()+"</td><td>"+$(this)[0].checked+"</td></tr>"):r.push("<tr><td>"+$(this).attr("name")+"</td><td>"+$(this).val()+"</td></tr>")}),r.push("</table>"),r},buildFormdata:function(e,r){return $(e).find("input,select,textarea").not("[type=hidden]").each(function(){"file"===$(this).attr("type")?void 0!==$(this)[0].files[0]&&null!==$(this)[0].files[0]&&r.append($(this).attr("id"),$(this)[0].files[0]):"radio"===$(this).attr("type")?r.append($(this).attr("name")+"_"+$(this).val(),$(this)[0].checked):r.append($(this).attr("name"),$(this).val())}),r},renderErrorMessage:function(e,r){$(e).html("<div class='error error-message'>"+r+"</div>")}},sendForm:function(e){var r=$.extend({apiUrl:"http://cmsapi.seven49.net/FormMail/",sendButton:"#send-form",mailTo:"info@seven49.net",replyTo:"MailFrom",mailFrom:"noreply@seven49.net",mailSubject:"Kontaktformular",validation:!0,formName:".aspnetForm",formContent:"#aspnetForm",sendCCToSender:!1,redirectOnSuccess:$("input[name=MailThanks]").val(),errorMessage:"Some errors ocurred while transmitting the form! Please refresh the page and try again!",alternateSuccessMessage:"This form was successfully sent!",loader:"<img class='send-form' src='http://cdn.seven49.net/common/images/loading/ajax-loader-2.gif' />"},e);if(r.validation){var t=formBuilder.helpers.languageCode("de");$("head").append('<script src="http://cdn.seven49.net/common/js/jquery/plugins/jquery-validation/jquery.validate.min.js"></script>'),"en"!==t&&setTimeout(function(){$("head").append('<script src="http://cdn.seven49.net/common/js/jquery/plugins/jquery-validation/localization/messages_'+t+'.js"></script>')},200)}$(r.sendButton).on("click",function(){r.validation?$(r.formName).valid()&&formBuilder.processForm({formContent:r.formContent,apiUrl:r.apiUrl,mailTo:r.mailTo,replyTo:$("input[name="+r.replyTo+"]").val(),mailFrom:r.mailFrom,mailSubject:r.mailSubject,formName:r.formName,redirectOnSuccess:r.redirectOnSuccess,sendCCToSender:r.sendCCToSender,errorMessage:r.errorMessage,alternateSuccessMessage:r.alternateSuccessMessage,loader:r.loader}):formBuilder.processForm({formContent:r.formContent,apiUrl:r.apiUrl,mailTo:r.mailTo,replyTo:$("input[name="+r.replyTo+"]").val(),mailFrom:r.mailFrom,mailSubject:r.mailSubject,sendCCToSender:r.sendCCToSender,formName:r.formName,errorMessage:r.errorMessage,redirectOnSuccess:r.redirectOnSuccess,alternateSuccessMessage:r.alternateSuccessMessage,loader:r.loader})})},processForm:function(e){var r=$.extend({formContent:"#aspnetForm",apiUrl:"http://cmsapi.seven49.net/FormMail/",mailTo:"info@seven49.net",replyTo:$("input[name=Email]").val(),mailFrom:"noreply@seven49.net",mailSubject:"Kontaktformular",formName:".aspnetForm",redirectOnSuccess:"",sendCCToSender:!1,errorMessage:"Some errors ocurred while transmitting the form! Please refresh the page and try again!",alternateSuccessMessage:"This form was successfully sent!",loader:"<img class='send-form' src='http://cdn.seven49.net/common/images/loading/ajax-loader-2.gif' alt='sending form' />"},e),t,a="<div class='loader' id='form-process-indicator'>"+r.loader+"</div>";if($(r.formContent).append(a),formBuilder.helpers.isReallyEmpty(r.redirectOnSuccess)||-1===r.redirectOnSuccess.indexOf("http://")&&(t=location.protocol+"//"+location.hostname+"/"+r.redirectOnSuccess),formBuilder.helpers.badIE()){var s=formBuilder.helpers.renderMessage($(r.formContent));$.post(r.apiUrl,{MailFrom:r.mailFrom,MailTo:r.mailTo,ReplyTo:r.replyTo,MailSubject:r.mailSubject,MailBody:s.join("")+"<br/>Wichtig:Der Kunde hat das Formular mit einem veralteten Browser abgeschickt - bei diesen steht der Dokumenten-Upload nicht zur Verfügung. Bitte fordern Sie diese, falls nötig,  per E-Mail vom Kunden an."},function(){r.sendCCToSender&&$.post(r.apiUrl,{MailFrom:r.mailFrom,MailTo:r.replyTo,ReplyTo:r.mailTo,MailSubject:r.mailSubject,MailBody:s.join("")}),formBuilder.helpers.isReallyEmpty(r.redirectOnSuccess)?$(r.formContent).html("<div class='success-message'>"+r.alternateSuccessMessage+"</div>"):window.location.href=t}).error(function(){formBuilder.helpers.renderErrorMessage(r.formContent,r.errorMessage)})}else{var n=new FormData;n.append("MailTo",r.mailTo),n.append("MailFrom",r.mailFrom),n.append("ReplyTo",r.replyTo),n.append("MailSubject",r.mailSubject),formBuilder.helpers.buildFormdata(r.formContent,n),$.ajax({url:r.apiUrl,data:n,type:"POST",contentType:!1,processData:!1,success:function(){if(r.sendCCToSender){var e=formBuilder.helpers.renderMessage($(r.formContent));$.post(r.apiUrl,{MailFrom:r.mailFrom,MailTo:r.replyTo,ReplyTo:r.mailTo,MailSubject:r.mailSubject,MailBody:e.join("")})}formBuilder.helpers.isReallyEmpty(r.redirectOnSuccess)?$(r.formContent).html("<div class='success-message'>"+r.alternateSuccessMessage+"</div>"):window.location.href=t},error:function(){formBuilder.helpers.renderErrorMessage(r.formContent,r.errorMessage)}})}}};